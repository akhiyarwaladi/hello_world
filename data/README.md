# Data Directory Structure

## Overview
Clean separation between raw source data and processed pipeline-ready data.

## Structure

```
data/
├── raw/                           # Raw source datasets (original downloads)
│   ├── kaggle_dataset/            # Original Kaggle MP-IDB YOLO dataset
│   │   └── MP-IDB-YOLO/          # 209 images, 16 classes (4 species x 4 stages)
│   ├── malaria_lifecycle/         # IML Lifecycle dataset (GitHub)
│   ├── mp_idb/                   # MP-IDB original dataset (GitHub)
│   └── .gitkeep/                 # Folder structure keeper
├── bbbc041_raw/                  # Raw BBBC041 dataset archive (separate)
│
├── processed/                     # Pipeline-ready processed data
│   ├── species/                  # Species classification (4 classes)
│   ├── stages/                   # Stage classification (4 stages)
│   ├── lifecycle/                # Lifecycle detection (parasite stages)
│   └── crops/                    # Generated crops from detection models
│
└── README.md                     # This file
```

## Data Flow

### Stage 1: Raw Data Processing
```bash
# Convert raw data to pipeline-ready format
python scripts/data_setup/setup_[dataset]_for_pipeline.py

# Outputs to: data/processed/[species|stages|lifecycle]/
```

### Stage 2: Detection Training
```bash
# Train detection models on processed data
python pipeline.py train yolo11_detection --data data/processed/[dataset]/

# Outputs to: results/current_experiments/training/detection/
```

### Stage 3: Crop Generation
```bash
# Generate crops from detection results
python scripts/training/11_crop_detections.py --model yolo11 --experiment [name]

# Outputs to: data/processed/crops/crops_from_[model]_[experiment]/
```

### Stage 4: Classification Training
```bash
# Train classification on crops
python pipeline.py train yolo11_classification --data data/processed/crops/[crop_folder]/

# Outputs to: results/current_experiments/training/classification/
```

## Usage Guidelines

### Raw Data
- **Never modify** files in `data/raw/`
- Original source datasets for reproducibility
- Use these as input for processing scripts

### Processed Data
- Generated by setup scripts from raw data
- Can be regenerated if needed
- Pipeline-ready formats (YOLO, etc.)

### Crops Data
- Generated from detection model outputs
- Used for classification training
- Named with source model and experiment

## Dataset Types

### Species (4-class classification)
- Classes: P_falciparum, P_vivax, P_malariae, P_ovale
- Source: Kaggle MP-IDB dataset
- Use: Species identification

### Stages (4-class classification)
- Classes: ring, schizont, trophozoite, gametocyte
- Source: Kaggle MP-IDB dataset (stage extraction)
- Use: Parasite stage classification

### Lifecycle (parasite detection)
- Classes: Single-class "parasite" for detection
- Source: IML Lifecycle dataset
- Use: Parasite detection in blood smears